{% extends 'admins/adminbase.html' %}
{% block contents %}

<section class="py-5">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="fw-bold text-primary">📚 Book Inventory</h2>
      <span class="badge bg-info text-dark fs-6">Total: {{ data|length }}</span>
    </div>

    {% if data %}
    <div class="table-responsive shadow rounded">
      <table class="table table-striped table-hover align-middle text-center">
        <thead class="table-dark">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Book Name</th>
            <th scope="col">ID</th>
            <th scope="col">Author</th>
            <th scope="col">Year</th>
            <th scope="col">💰 Price</th>
            <th scope="col">📦 Stock</th>
            <th scope="col">📌 Status</th>
            <th scope="col">🖼️ Cover</th>
          </tr>
        </thead>
        <tbody>
          {% for i in data %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td class="text-capitalize">{{ i.bookname }}</td>
            <td>{{ i.bookid }}</td>
            <td>{{ i.bookauthor }}</td>
            <td>{{ i.publishyear }}</td>
            <td>₹{{ i.price }}</td>
            <td>{{ i.stock }}</td>
            <td>
              <span class="badge {% if i.status == 'Available' %}bg-success{% else %}bg-danger{% endif %}">
                {{ i.status }}
              </span>
            </td>
            <td>
              {% if i.cover_image %}
                <img src="/{{ i.cover_image }}" class="rounded border" alt="Cover Image" width="60" height="80"
                  data-bs-toggle="tooltip" title="{{ i.bookname }}" />
              {% else %}
                <span class="text-muted">No Image</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
      <div class="alert alert-warning text-center">
        No books found in the database.
      </div>
    {% endif %}
  </div>
</section>

<script>
  var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
  tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl);
  });
</script>

{% endblock %}